// Test generated by RoostGPT for test integrationtest-0408 using AI Type Open Source AI and AI Model meta-llama/Llama-2-13b-chat

config:
  phases:
    - duration: 300
      arrivalRate: 25

before:
  flow:
    - log: "Get auth token"
    - post:
        url: "/auth"
        json:
          username: "myUsername"
          password: "myPassword"
        capture:
          - json: $.id_token
            as: token

scenarios:
  - flow:
      - get:
          url: "/api/products"
          headers:
            authorization: "Bearer {{ token }}"
          expect:
            status: 200
            body: []
          description: "Get all products"

  - flow:
      - post:
          url: "/api/products"
          json:
            name: "Product 1"
            price: 19.99
          headers:
            authorization: "Bearer {{ token }}"
          expect:
            status: 201
            body:
              name: "Product 1"
              price: 19.99
          description: "Add a new product to the store"

  - flow:
      - get:
          url: "/api/products/{productId}"
          headers:
            authorization: "Bearer {{ token }}"
          param:
            productId: "1"
          expect:
            status: 200
            body:
              name: "Product 1"
              price: 19.99
          description: "Find product by ID"

  - flow:
      - put:
          url: "/api/products/{productId}"
          json:
            name: "New Product Name"
            price: 49.99
          headers:
            authorization: "Bearer {{ token }}"
          param:
            productId: "1"
          expect:
            status: 200
            body:
              name: "New Product Name"
              price: 49.99
          description: "Update a product in the store with form data"

  - flow:
      - delete:
          url: "/api/products/{productId}"
          headers:
            authorization: "Bearer {{ token }}"
          param:
            productId: "1"
          expect:
            status: 204
          description: "Delete a product"

after:
  flow:
    - log: "Invalidate token"
    - post:
        url: "/logout"
        json:
          token: "{{ token }}"
