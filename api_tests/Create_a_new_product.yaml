// Test generated by RoostGPT for test integrationtest-0408 using AI Type Open Source AI and AI Model meta-llama/Llama-2-13b-chat

# Improved Artillery Test Script

config:
  target: "${{ SERVER_URL }}";
  phases:
    - duration: 60;
      arrivalRate: 20;
  variables:
    productId: ["2", "3"]; # Added variable to store product IDs

scenarios:
  # Successful API Request
  successful-request:
    flow:
      - delete:
          url: "/products/${productId}";
          headers: {Content-Type: application/json};
          payload: null;
          capture:
            json: $.message;
            as: responseMessage;
      - think: 5;
      - assert:
          - statusCode: 200;
          - responseMessage: "Product deleted";
  
  # API Request with Product Not Found
  not-found-request:
    flow:
      - delete:
          url: "/products/invalid";
          headers: {Content-Type: application/json};
          payload: null;
          capture:
            json: $.message;
            as: responseMessage;
      - think: 5;
      - assert:
          - statusCode: 404;
          - responseMessage: "Product not found";
  
  # API Request with Invalid Product ID
  invalid-id-request:
    flow:
      - delete:
          url: "/products/999999999999999999";
          headers: {Content-Type: application/json};
          payload: null;
          capture:
            json: $.message;
            as: responseMessage;
      - think: 5;
      - assert:
          - statusCode: 400;
          - responseMessage: "Invalid product ID";
