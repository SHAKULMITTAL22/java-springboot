// Test generated by RoostGPT for test integrationtest-0408 using AI Type Open Source AI and AI Model meta-llama/Llama-2-13b-chat

# Configure Artillery
config:
  # Set the server URL using an environment variable
  target: "$processEnvironment.SERVER_URL"
  phases:
    - duration: 300s
      arrivalRate: 25requests/s

# Scenarios
scenarios:
  - name: Create a new product
    flow:
      - get: /api/products
      - post: /api/products
        headers:
          Authorization: Bearer <token>
        payload:
          name: Test Product
          description: This is a test product.
          price: 10.0
      - assert:
          statusCode: 201
          body:
            name: Test Product
            description: This is a test product.
            price: 10.0

  - name: Get all products
    flow:
      - get: /api/products
      - assert:
          statusCode: 200
          body:
            items: [{"name": "Test Product", "description": "This is a test product.", "price": 10.0}]

  - name: Find product by ID
    flow:
      - get: /api/products/{productId}
      - assert:
          statusCode: 200
          body:
            name: Test Product
            description: This is a test product.
            price: 10.0

  - name: Update product in the store with form data
    flow:
      - put: /api/products/{productId}
        headers:
          Authorization: Bearer <token>
        payload:
          name: Updated Test Product
          description: This is an updated test product.
          price: 15.0
      - assert:
          statusCode: 200
          body:
            name: Updated Test Product
            description: This is an updated test product.
            price: 15.0

  - name: Delete a product
    flow:
      - delete: /api/products/{productId}
      - assert:
          statusCode: 204
